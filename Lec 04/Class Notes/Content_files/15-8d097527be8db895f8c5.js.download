(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{"6TNA":function(e,a){e.exports='<span class="schema-grade">{{displayGrade.fullDisplayGrade}}</span>\n'},O3Pz:function(e,a){e.exports='<div class="grade-callout-wrapper">\n  <div class="grade-callout readonly {{displayGrade.getCourseColorClass()}}"\n       ng-class="{ \'pending\': displayGrade.attempt.isNeedsGrading() }"\n       bb-load-bundle="components/directives/grade/display-grade"\n       bb-click-to-invoke-child="a.bb-click-grade-target">\n    <span class="value" bb-translate>{{displayGrade.attemptStatus}}</span>\n  </div>\n</div>\n'},S6sW:function(e,a){e.exports='<ng-switch on="displayGrade.shouldShowPointsPossible()">\n  <span ng-switch-when="true" ng-bind-html="displayGrade.fullDisplayGrade"></span>\n  <span ng-switch-default><strong>{{displayGrade.fullDisplayGrade}}</strong></span>\n</ng-switch>'},"cH+F":function(e,a){e.exports='<div class="grade-callout-wrapper">\n  <div class="grade-callout readonly {{displayGrade.colorClass || \'na\'}} overall-grade"\n       bb-load-bundle="components/directives/grade/display-grade"\n       bb-click-to-invoke-child="a.bb-click-grade-target"\n       ng-class="{\'defaultCursor\': displayGrade.cursorDefault}">\n    <span ng-if="!displayGrade.noGradeToDisplay()" class="sr-only" bb-translate>{{displayGrade.gradeDisplayItem.perfCodeDesc || translateKey}}</span>\n    <span ng-if="!overallGradePeekSref" class="value">{{displayGrade.fullDisplayGrade}}</span>\n    <a class="overall-grade value" \n       ng-if="overallGradePeekSref" \n       bb-peek-sref="{{overallGradePeekSref}}"\n       analytics-id="components.directives.grade.display-grade.overallGrade.link">\n      {{displayGrade.fullDisplayGrade}}\n    </a>  \n  </div>\n</div>\n'},dJ97:function(e,a,s){"use strict";s.d(a,"a",(function(){return v}));var i=s("D57K"),t=(s("pGPW"),s("w0/N"),s("wHJ2")),l=s("nbDY"),r=s.n(l),n=s("Fvsw"),o=s("yMoE"),d=s("X/qj"),p=s("oi1r"),c=s("o5Lu"),u=s("0JpG"),y=s("pjml"),h=s("fYJU"),g=s("O3Pz"),m=s("cH+F"),G=s("6TNA"),f=s("S6sW"),b=s("pHHL"),v="ultra.grade.display",D=function(e){function a(a,s){var i=e.call(this,a)||this;return i.template=s,i}return Object(i.__extends)(a,e),a.prototype.getTemplateHtml=function(){return this.template.template},a.AttemptStatus=new a("AttemptStatus",{template:g}),a.FinalBase=new a("FinalBase",{template:m}),a.Column=new a("Column",{template:G}),a.Course=new a("Course",{template:f}),a.GradeColor=new a("GradeColor",{template:b}),a}(r.a),S=function(){function e(a,s,i,l,r,n,d,p,c,u){var y=this;this.scope=a,this.attrs=s,this.$q=i,this.$injector=l,this.gradebookPermissionService=n,this.localize=d,this.context=p,this.schemaService=c,this.contextUser=u,this.fullDisplayGrade=e.NO_GRADE_DISPLAY,this.bundlePromise=d.loadBundle("components/directives/grade/display-grade"),this.courseColorClass=a.courseColorClass,this.cursorPointer=a.cursorPointer&&a.cursorPointer(),this.cursorDefault=a.cursorDefault&&a.cursorDefault(),this.isStudent=u.userModel.isStudent(),this.isStudent||n.canViewGrades(this.scope.course&&this.scope.course().id)?(this.scope.$watch("::column",(function(e){if(e){var a=function(e){var a,s=y.scope.$watch("gradeDetail",(function(i){i&&(y.schemaGrade=r.getGradeToDisplay(i.displayGrade,y.scope,y.schema.scaleType),y.setFullDisplayGrade(),(D.GradeColor.isEqualTo(y.scope.gradeType)||D.FinalBase.isEqualTo(y.scope.gradeType))&&(y.gradeDisplayItem=l.instantiate(o.a,{gradeDetail:i,scope:y.scope}),y.scope.$watch("::column",(function(a){a&&y.gradeDisplayItem.init(a,e).then((function(){y.gradeDisplayItem.displayGrade=y.scope.showNotGraded&&y.scope.showNotGraded()?null:i.displayGrade,y.gradeDisplayItem.displayValue&&(y.colorClass=y.gradeDisplayItem.getGradeColor())}))}))),s(),a())}));a=y.scope.$watch("summary",(function(e){y.colorClass="na",e&&(y.schemaGrade=e.averageGradeForStudentsSchemaValue,y.setFullDisplayGrade(),D.FinalBase.isEqualTo(y.scope.gradeType)&&!t.isUndefined(e.averageGradeForStudents)&&(y.colorClass=r.getPercentileColor(e.averageGradeForStudents)),s())}),!0)};y.scope.schema?(y.schema=y.scope.schema,a(y.scope.schema)):c.loadGradeSchema(e).then((function(e){y.schema=e,a()}))}})),D.AttemptStatus.isEqualTo(this.scope.displayType)&&(this.courseColorClass="na",this.attempt?this.attempt.isNeedsGrading()?this.attemptStatus="components.directives.grade.display-grade.pending-grade":this.attempt.isInProgress()&&(this.attemptStatus="components.directives.grade.display-grade.NA"):this.attemptStatus="components.directives.grade.display-grade.NA")):(this.fullDisplayGrade=this.attemptStatus=e.NO_GRADE_DISPLAY,this.colorClass="na")}return e.prototype.setFullDisplayGrade=function(){var a,s=this;if(this.schema&&this.schema.scaleType&&(y.J.ScaleType.Tabular.isEqualTo(this.schema.scaleType)||y.J.ScaleType.Text.isEqualTo(this.schema.scaleType)||y.J.ScaleType.Complete.isEqualTo(this.schema.scaleType)))this.fullDisplayGrade=this.scope.showNotGraded&&this.scope.showNotGraded()?e.NO_GRADE_DISPLAY:this.schemaGrade||e.NO_GRADE_DISPLAY;else if(a=this.scope.showNotGraded&&this.scope.showNotGraded()?e.NO_GRADE_DISPLAY:this.getSchemaGrade(),this.shouldShowPointsPossible()){var i="components.directives.grade.display-grade.";i+=D.Course.isEqualTo(this.scope.gradeType)?"course-score":"score",this.bundlePromise.then((function(){s.fullDisplayGrade=s.localize.translateSync({locale:s.localize.getLocale(s.scope),key:i,params:{grade:a,possible:s.scope.gradeDetail&&s.scope.gradeDetail.pointsPossible||s.scope.column.possible},noWrap:!0})}))}else this.schema&&y.J.ScaleType.Percent.isEqualTo(this.schema.scaleType)&&a!==e.NO_GRADE_DISPLAY?this.bundlePromise.then((function(){s.fullDisplayGrade=s.localize.translateSync({locale:s.localize.getLocale(s.scope),key:"components.directives.grade.display-grade.percent",params:{grade:a},noWrap:!0})})):this.fullDisplayGrade=a},Object.defineProperty(e.prototype,"attempt",{get:function(){return this.scope.attempt&&this.scope.attempt()||this.scope.gradeDetail&&(this.scope.gradeDetail.ui.groupAttempt||this.scope.gradeDetail.ui.attempt)},enumerable:!0,configurable:!0}),e.prototype.getSchemaGrade=function(){var a;try{var s=this.schemaGrade.replace(/[^0-9.,]/g,"");a=this.localize.parseNumberSync(s)}catch(e){a=null}return null!=a&&this.localize.formatNumberSync(a,this.scope,{maximumFractionDigits:c.d.DEFAULT_GRADEBOOK_SETTINGS_AFTER_DECIMAL})||e.NO_GRADE_DISPLAY},e.prototype.shouldShowPointsPossible=function(){return this.schema&&this.schema.scaleType&&y.J.ScaleType.Score.isEqualTo(this.schema.scaleType)&&(y.F.CalculationType.NonCalculated.isEqualTo(this.scope.column.calculationType)||this.scope.gradeDetail&&this.scope.gradeDetail.pointsPossible>0)},e.prototype.getCourseColorClass=function(){return this.courseColorClass},e.prototype.noGradeToDisplay=function(){return this.fullDisplayGrade===e.NO_GRADE_DISPLAY},e.prototype.getNoGradeDisplay=function(){return e.NO_GRADE_DISPLAY},e.prototype.shouldShowRubricButton=function(){return this.scope.showRubricButton&&this.scope.showRubricButton()&&this.scope.column.hasRubricAssociation&&this.scope.column.hasRubricAssociation()},e.prototype.shouldShowRubricDiv=function(){return this.scope.showRubricDiv&&this.scope.showRubricDiv()&&this.scope.column.hasRubricAssociation&&this.scope.column.hasRubricAssociation()},e.prototype.shouldShowRubricEvaluation=function(){return this.scope.column.hasRubricAssociation&&this.scope.column.hasRubricAssociation()&&null!=this.attempt&&this.attempt.isCompleted()&&!this.scope.gradeDetail.isOverrideGrade()},e.NO_GRADE_DISPLAY="--",e.$inject=["scope","attrs","$q","$injector",c.g,d.b,u.serviceName,n.b,p.b,h.b],e}(),w=function(){function e(e,a){var s=this;this.$injector=e,this.$compile=a,this.restrict="E",this.scope={attempt:"&?",gradeDetail:"=",summary:"=",column:"=",schema:"=?",displayType:"@",finalGrade:"&?",translateKey:"@",courseColorClass:"=",isGroupGradeMultiple:"&?",showNotGraded:"&?",overallGradePeekSref:"@?",showRubricButton:"&?",showRubricDiv:"&?",cursorPointer:"&?",cursorDefault:"&?",course:"&?"},this.link=function(e,a,i){e.displayGrade=s.$injector.instantiate(S,{scope:e,attrs:i}),e.gradeType=D.parse(e.displayType)||D.Column,a.append(s.$compile(e.gradeType.getTemplateHtml())(e))}}return e.$inject=["$injector","$compile"],e}();t.module(v,[c.f,d.a]).directive("bbDisplayGrade",["$injector",function(e){return e.instantiate(w)}])},pGPW:function(e,a,s){},pHHL:function(e,a){e.exports='<div class="grade-color">\n  <div ng-if="!displayGrade.shouldShowRubricButton() && !displayGrade.shouldShowRubricDiv()">\n    <div ng-if="!(isGroupGradeMultiple() && !showNotGraded())"\n         ng-class="{ \'show-total\': displayGrade.gradeDisplayItem.shouldShowTotalPoints(),\n                     \'final-grade\': finalGrade(),\n                     \'na\': displayGrade.gradeDisplayItem.displayValue == null,\n                     \'cursor-pointer\': displayGrade.cursorPointer,\n                     \'defaultCursor\': displayGrade.cursorDefault}"\n         class="wrapping-input-style {{displayGrade.colorClass}}"\n         ready="{{::displayGrade.fullDisplayGrade && !displayGrade.noGradeToDisplay() || undefined}}">\n      <ng-switch on="displayGrade.schema.scaleType">\n        <span ng-switch-default>\n          <span ng-if="displayGrade.fullDisplayGrade != null && !overallGradePeekSref" class="grade-input-display ready" bb-translate-attrs="{ title: \'{{displayGrade.gradeDisplayItem.perfCodeDesc || translateKey}}\'}">{{displayGrade.fullDisplayGrade}}</span>\n          <a ng-if="displayGrade.fullDisplayGrade != null && overallGradePeekSref" \n             class="grade-input-display ready" \n             bb-peek-sref="{{overallGradePeekSref}}" \n             bb-translate-attrs="{ title: \'{{displayGrade.gradeDisplayItem.perfCodeDesc || translateKey}}\'}"\n             analytics-id="components.directives.grade.display-grade.scale.fullDisplayGrade.link">\n            {{displayGrade.fullDisplayGrade}}\n          </a>\n          <span ng-if="displayGrade.fullDisplayGrade == null && !overallGradePeekSref" class="grade-input-display" bb-translate-attrs="{ title: \'{{displayGrade.gradeDisplayItem.perfCodeDesc || translateKey}}\'}">{{::displayGrade.getNoGradeDisplay()}}</span>\n          <a ng-if="displayGrade.fullDisplayGrade == null && overallGradePeekSref" \n             class="grade-input-display" \n             bb-peek-sref="{{overallGradePeekSref}}" \n             bb-translate-attrs="{ title: \'{{displayGrade.gradeDisplayItem.perfCodeDesc || translateKey}}\'}"\n             analytics-id="components.directives.grade.display-grade.scale.getNoGradeDisplay.link">\n            {{::displayGrade.getNoGradeDisplay()}}\n          </a>\n        </span>\n        <span ng-switch-when="SCORE">\n          \x3c!-- Accommodate for hiding of points possible in small format --\x3e\n          <span ng-if="displayGrade.gradeDisplayItem.displayValue != null && !overallGradePeekSref" class="grade-input-display ready">{{displayGrade.gradeDisplayItem.displayValue}}</span>\n          <a ng-if="displayGrade.gradeDisplayItem.displayValue != null && overallGradePeekSref" \n             class="grade-input-display ready" \n             bb-peek-sref="{{overallGradePeekSref}}"\n             analytics-id="components.directives.grade.display-grade.score.fullDisplayGrade.link">\n            {{displayGrade.gradeDisplayItem.displayValue}}\n          </a>\n          <span ng-if="displayGrade.gradeDisplayItem.displayValue == null && !overallGradePeekSref" class="grade-input-display">{{::displayGrade.getNoGradeDisplay()}}</span>\n          <a ng-if="displayGrade.gradeDisplayItem.displayValue == null && overallGradePeekSref" \n             class="grade-input-display" \n             bb-peek-sref="{{overallGradePeekSref}}"\n             analytics-id="components.directives.grade.display-grade.score.getNoGradeDisplay.link">\n            {{::displayGrade.getNoGradeDisplay()}}\n          </a>\n          <span ng-if="displayGrade.shouldShowPointsPossible()" class="points-text" bb-translate translate-values="{total: gradeDetail.pointsPossible || column.possible}">components.directives.grade.display-grade.points</span>\n        </span>\n      </ng-switch>\n    </div>\n    <div ng-if="isGroupGradeMultiple() && !showNotGraded()" class="wrapping-input-style is-multiple">\n      <div ng-if="overallGradePeekSref" class="group-multiple" bb-peek-sref="{{overallGradePeekSref}}" bb-translate>components.directives.grade.display-grade.multiple</div>\n      <div ng-if="!overallGradePeekSref" class="group-multiple" bb-translate>components.directives.grade.display-grade.multiple</div>\n    </div>\n  </div>\n  <div ng-if="displayGrade.shouldShowRubricButton()">\n    <a ng-if="!displayGrade.shouldShowRubricEvaluation()"\n       bb-peek-sref="rubric-view"\n       class="js-rubric-view wrapping-input-style clear cursor-pointer"\n       ng-class="displayGrade.colorClass"\n       analytics-id="components.directives.grade.display-grade.rubric.link">\n      <span>\n        <bb-svg-icon size="small" icon="rubric"></bb-svg-icon>\n        <span class="grade-input-display ready" ng-if="displayGrade.gradeDisplayItem.displayValue != null">{{displayGrade.gradeDisplayItem.displayValue}}&nbsp</span>\n        <span class="grade-input-display ready" ng-if="displayGrade.gradeDisplayItem.displayValue == null">{{::displayGrade.getNoGradeDisplay()}}</span>&nbsp;\n        <span ng-if="displayGrade.shouldShowPointsPossible()" class="points-text" bb-translate translate-values="{total: gradeDetail.pointsPossible || column.possible}">components.directives.grade.display-grade.points</span>\n      </span>\n    </a>\n    <a ng-if="displayGrade.shouldShowRubricEvaluation()"\n       bb-peek-sref="rubric-evaluation({groupId: displayGrade.attempt.groupId})"\n       class="js-rubric-evaluation wrapping-input-style clear cursor-pointer"\n       ng-class="displayGrade.colorClass"\n       analytics-id="components.directives.grade.display-grade.rubricEvaluation.link">\n      <span>\n        <bb-svg-icon size="small" icon="rubric"></bb-svg-icon>\n        <span class="grade-input-display ready" ng-if="displayGrade.gradeDisplayItem.displayValue != null">{{displayGrade.gradeDisplayItem.displayValue}}&nbsp</span>\n        <span class="grade-input-display ready" ng-if="displayGrade.gradeDisplayItem.displayValue == null">{{::displayGrade.getNoGradeDisplay()}}&nbsp</span>&nbsp;\n        <span ng-if="displayGrade.shouldShowPointsPossible()" class="points-text" bb-translate translate-values="{total: gradeDetail.pointsPossible || column.possible}">components.directives.grade.display-grade.points</span>\n      </span>\n    </a>\n  </div>\n  <div ng-if="displayGrade.shouldShowRubricDiv() && displayGrade.shouldShowRubricEvaluation()"\n       class="wrapping-input-style clear"\n       ng-class="displayGrade.colorClass">\n    <span>\n      <bb-svg-icon size="small" icon="rubric"></bb-svg-icon>\n      <span class="grade-input-display ready" ng-if="displayGrade.gradeDisplayItem.displayValue != null">{{displayGrade.gradeDisplayItem.displayValue}}</span>\n      <span class="grade-input-display ready" ng-if="displayGrade.gradeDisplayItem.displayValue == null">{{::displayGrade.getNoGradeDisplay()}}</span>&nbsp;\n      <span ng-if="displayGrade.shouldShowPointsPossible()" class="points-text" bb-translate translate-values="{total: gradeDetail.pointsPossible || column.possible}">components.directives.grade.display-grade.points</span>\n    </span>\n  </div>\n</div>'},"w0/N":function(e,a,s){var i=s("ziER"),t=s("5JeM"),l=new i({id:"icon-small-rubric",use:"icon-small-rubric-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-rubric"><path d="M11 12h4v3h-4v-3zM4 12h4v3H4v-3zM1 12v3M1 5v3M11 5h4v3h-4V5zM4 5h4v3H4V5zM8 1H4M15 1h-4" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});t.add(l);e.exports=l},yMoE:function(e,a,s){"use strict";s.d(a,"a",(function(){return o}));var i=s("D57K"),t=s("pjml"),l=s("oi1r"),r=s("o5Lu"),n=function(e){function a(){return null!==e&&e.apply(this,arguments)||this}return Object(i.__extends)(a,e),a}(t.J.ScaleType),o=function(){function e(e,a,s,i,t){this.grade=e,this.$q=a,this.gradeDetail=s,this.scope=i,this.schemaService=t,this.wasValueErased=!1}return e.prototype.init=function(e,a){var s=this;this.column=e;var i=function(e){s.schema=e,s.scaleType=null==e?void 0:e.scaleType};return a?this.$q.when(i(a)):this.schemaService.loadGradeSchema(e).then((function(e){i(e)}))},e.prototype.shouldShowTotalPoints=function(){return null!=this._displayValue&&(this.schema&&this.schema.scaleType&&t.J.ScaleType.Score.isEqualTo(this.schema.scaleType)&&!this.isDisplayValueTooLargeForTotalPoints())},e.prototype.isDisplayValueTooLargeForTotalPoints=function(){return this._displayValue&&this._displayValue.toString().length>r.e.DEFAULT_GRADEBOOK_SETTINGS_BEFORE_DECIMAL},Object.defineProperty(e.prototype,"displayGrade",{set:function(e){var a,s;if(e)switch(this._nonFormattedScore=e.score,this._perfCode=e.perfCode,this._perfCode?this.perfCodeDesc=this._perfCode.description:this.perfCodeDesc="",this.displayValue=this.grade.getGradeToDisplay(e,this.scope,null===(a=this.schema)||void 0===a?void 0:a.scaleType),null===(s=this.schema)||void 0===s?void 0:s.scaleType){case t.J.ScaleType.Tabular.toString():var l=null;if(this._perfCode)l={perfCode:this._perfCode};else if(this.column.externalGrade&&this.gradeDetail&&this.gradeDetail.isOverrideGrade()){var r=this.gradeDetail.pointsPossible||this.column.possible||100;l={score:n=this._nonFormattedScore&&this._nonFormattedScore*r/100}}else l={score:this._nonFormattedScore};this._parsedValue=this.grade.getGradeToDisplay(l,this.scope,t.J.ScaleType.Score.toString());break;case t.J.ScaleType.Percent.toString():var n=this._nonFormattedScore&&this._nonFormattedScore/100*this.column.possible;this._parsedValue=this.grade.getGradeToDisplay({score:n},this.scope,t.J.ScaleType.Score.toString());break;case t.J.ScaleType.Score.toString():this._parsedValue=this.displayValue;break;case t.J.ScaleType.Complete.toString():this._parsedValue=this.grade.getGradeToDisplay(Object(i.__assign)(Object(i.__assign)({},e),{grade:null}),this.scope,this.schema.scaleType);break;case t.J.ScaleType.Text.toString():this._parsedValue=e.grade}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"displayValue",{get:function(){return this._displayValue},set:function(e){this.wasValueErased=this.grade.wasGradeCleared(this.displayValue,e),this._displayValue=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"parsedValue",{get:function(){return this._parsedValue},set:function(e){this._parsedValue=e},enumerable:!0,configurable:!0}),e.prototype.hasPerfCode=function(){return!!this._perfCode},e.prototype.getGradeColor=function(){var e,a;return(null===(a=null===(e=this.gradeDetail)||void 0===e?void 0:e.displayGrade)||void 0===a?void 0:a.isOverride)&&this.column.externalGrade||n.Text.isEqualTo(this.scaleType)?"gray":this.displayValue?n.Percent.isEqualTo(this.scaleType)?this.grade.getPercentileColor(this._nonFormattedScore):this.getGradeColorScoreSchema():void 0},e.prototype.getGradeColorScoreSchema=function(){var e=this.gradeDetail?this.gradeDetail.pointsPossible:this.column.possible;if(e>0){var a=this._nonFormattedScore/e*100;return this.grade.getPercentileColor(a)}return"na"},e.$inject=[r.g,"$q","gradeDetail","scope",l.b],e}()}}]);